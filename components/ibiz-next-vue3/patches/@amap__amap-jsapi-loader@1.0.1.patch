diff --git a/dist/index.js b/dist/index.js
index b0daa68948ff30600560db03493d8a41ae3bf5ce..b283faee05ed5d9b6e3c2d241c07be52e8d865d6 100644
--- a/dist/index.js
+++ b/dist/index.js
@@ -1,11 +1,29 @@
-'use strict';(function(m,p){"object"===typeof exports&&"undefined"!==typeof module?module.exports=p():"function"===typeof define&&define.amd?define(p):(m=m||self,m.AMapLoader=p())})(this,function(){function m(a){var b=[];a.AMapUI&&b.push(p(a.AMapUI));a.Loca&&b.push(r(a.Loca));return Promise.all(b)}function p(a){return new Promise(function(h,c){var f=[];if(a.plugins)for(var e=0;e<a.plugins.length;e+=1)-1==d.AMapUI.plugins.indexOf(a.plugins[e])&&f.push(a.plugins[e]);if(g.AMapUI===b.failed)c("\u524d\u6b21\u8bf7\u6c42 AMapUI \u5931\u8d25");
-else if(g.AMapUI===b.notload){g.AMapUI=b.loading;d.AMapUI.version=a.version||d.AMapUI.version;e=d.AMapUI.version;var l=document.body||document.head,k=document.createElement("script");k.type="text/javascript";k.src="https://webapi.amap.com/ui/"+e+"/main.js";k.onerror=function(a){g.AMapUI=b.failed;c("\u8bf7\u6c42 AMapUI \u5931\u8d25")};k.onload=function(){g.AMapUI=b.loaded;if(f.length)window.AMapUI.loadUI(f,function(){for(var a=0,b=f.length;a<b;a++){var c=f[a].split("/").slice(-1)[0];window.AMapUI[c]=
-arguments[a]}for(h();n.AMapUI.length;)n.AMapUI.splice(0,1)[0]()});else for(h();n.AMapUI.length;)n.AMapUI.splice(0,1)[0]()};l.appendChild(k)}else g.AMapUI===b.loaded?a.version&&a.version!==d.AMapUI.version?c("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c AMapUI \u6df7\u7528"):f.length?window.AMapUI.loadUI(f,function(){for(var a=0,b=f.length;a<b;a++){var c=f[a].split("/").slice(-1)[0];window.AMapUI[c]=arguments[a]}h()}):h():a.version&&a.version!==d.AMapUI.version?c("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c AMapUI \u6df7\u7528"):
-n.AMapUI.push(function(a){a?c(a):f.length?window.AMapUI.loadUI(f,function(){for(var a=0,b=f.length;a<b;a++){var c=f[a].split("/").slice(-1)[0];window.AMapUI[c]=arguments[a]}h()}):h()})})}function r(a){return new Promise(function(h,c){if(g.Loca===b.failed)c("\u524d\u6b21\u8bf7\u6c42 Loca \u5931\u8d25");else if(g.Loca===b.notload){g.Loca=b.loading;d.Loca.version=a.version||d.Loca.version;var f=d.Loca.version,e=d.AMap.version.startsWith("2"),l=f.startsWith("2");if(e&&!l||!e&&l)c("JSAPI \u4e0e Loca \u7248\u672c\u4e0d\u5bf9\u5e94\uff01\uff01");
-else{e=d.key;l=document.body||document.head;var k=document.createElement("script");k.type="text/javascript";k.src="https://webapi.amap.com/loca?v="+f+"&key="+e;k.onerror=function(a){g.Loca=b.failed;c("\u8bf7\u6c42 AMapUI \u5931\u8d25")};k.onload=function(){g.Loca=b.loaded;for(h();n.Loca.length;)n.Loca.splice(0,1)[0]()};l.appendChild(k)}}else g.Loca===b.loaded?a.version&&a.version!==d.Loca.version?c("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c Loca \u6df7\u7528"):h():a.version&&a.version!==d.Loca.version?
-c("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c Loca \u6df7\u7528"):n.Loca.push(function(a){a?c(a):c()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var b;(function(a){a.notload="notload";a.loading="loading";a.loaded="loaded";a.failed="failed"})(b||(b={}));var d={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},g={AMap:b.notload,AMapUI:b.notload,Loca:b.notload},n={AMap:[],AMapUI:[],Loca:[]},q=[],t=function(a){"function"==typeof a&&
-(g.AMap===b.loaded?a(window.AMap):q.push(a))};return{load:function(a){return new Promise(function(h,c){if(g.AMap==b.failed)c("");else if(g.AMap==b.notload){var f=a.key,e=a.version,l=a.plugins;f?(window.AMap&&"lbs.amap.com"!==location.host&&c("\u7981\u6b62\u591a\u79cdAPI\u52a0\u8f7d\u65b9\u5f0f\u6df7\u7528"),d.key=f,d.AMap.version=e||d.AMap.version,d.AMap.plugins=l||d.AMap.plugins,g.AMap=b.loading,e=document.body||document.head,window.___onAPILoaded=function(d){delete window.___onAPILoaded;if(d)g.AMap=
-b.failed,c(d);else for(g.AMap=b.loaded,m(a).then(function(){h(window.AMap)})["catch"](c);q.length;)q.splice(0,1)[0]()},l=document.createElement("script"),l.type="text/javascript",l.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+d.AMap.version+"&key="+f+"&plugin="+d.AMap.plugins.join(","),l.onerror=function(a){g.AMap=b.failed;c(a)},e.appendChild(l)):c("\u8bf7\u586b\u5199key")}else if(g.AMap==b.loaded)if(a.key&&a.key!==d.key)c("\u591a\u4e2a\u4e0d\u4e00\u81f4\u7684 key");else if(a.version&&
-a.version!==d.AMap.version)c("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c JSAPI \u6df7\u7528");else{f=[];if(a.plugins)for(e=0;e<a.plugins.length;e+=1)-1==d.AMap.plugins.indexOf(a.plugins[e])&&f.push(a.plugins[e]);if(f.length)window.AMap.plugin(f,function(){m(a).then(function(){h(window.AMap)})["catch"](c)});else m(a).then(function(){h(window.AMap)})["catch"](c)}else if(a.key&&a.key!==d.key)c("\u591a\u4e2a\u4e0d\u4e00\u81f4\u7684 key");else if(a.version&&a.version!==d.AMap.version)c("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c JSAPI \u6df7\u7528");
-else{var k=[];if(a.plugins)for(e=0;e<a.plugins.length;e+=1)-1==d.AMap.plugins.indexOf(a.plugins[e])&&k.push(a.plugins[e]);t(function(){if(k.length)window.AMap.plugin(k,function(){m(a).then(function(){h(window.AMap)})["catch"](c)});else m(a).then(function(){h(window.AMap)})["catch"](c)})}})},reset:function(){delete window.AMap;delete window.AMapUI;delete window.Loca;d={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}};g={AMap:b.notload,AMapUI:b.notload,
-Loca:b.notload};n={AMap:[],AMapUI:[],Loca:[]}}}})
+/*
+ *****************************************************************************
+    Copyright (c) Microsoft Corporation.
+
+    Permission to use, copy, modify, and/or distribute this software for any
+    purpose with or without fee is hereby granted.
+
+    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
+    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
+    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
+    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
+    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
+    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
+    PERFORMANCE OF THIS SOFTWARE.
+*****************************************************************************/
+'use strict';(function(q,r){"object"===typeof exports&&"undefined"!==typeof module?module.exports=r():"function"===typeof define&&define.amd?define(r):(q=q||self,q.AMapLoader=r())})(this,function(){function q(a,e,h,c){function b(a){return a instanceof h?a:new h(function(b){b(a)})}return new (h||(h=Promise))(function(h,g){function f(a){try{d(c.next(a))}catch(u){g(u)}}function k(a){try{d(c["throw"](a))}catch(u){g(u)}}function d(a){a.done?h(a.value):b(a.value).then(f,k)}d((c=c.apply(a,e||[])).next())})}
+function r(a,g){function e(a){return function(f){return c([a,f])}}function c(d){if(m)throw new TypeError("Generator is already executing.");for(;b;)try{if(m=1,k&&(f=d[0]&2?k["return"]:d[0]?k["throw"]||((f=k["return"])&&f.call(k),0):k.next)&&!(f=f.call(k,d[1])).done)return f;if(k=0,f)d=[d[0]&2,f.value];switch(d[0]){case 0:case 1:f=d;break;case 4:return b.label++,{value:d[1],done:!1};case 5:b.label++;k=d[1];d=[0];continue;case 7:d=b.ops.pop();b.trys.pop();continue;default:if(!(f=b.trys,f=0<f.length&&
+f[f.length-1])&&(6===d[0]||2===d[0])){b=0;continue}if(3===d[0]&&(!f||d[1]>f[0]&&d[1]<f[3]))b.label=d[1];else if(6===d[0]&&b.label<f[1])b.label=f[1],f=d;else if(f&&b.label<f[2])b.label=f[2],b.ops.push(d);else{f[2]&&b.ops.pop();b.trys.pop();continue}}d=g.call(a,b)}catch(w){d=[6,w],k=0}finally{m=f=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}var b={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},m,k,f,l;return l={next:e(0),"throw":e(1),"return":e(2)},"function"===
+typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l}function t(a){var e=[];a.AMapUI&&e.push(x(a.AMapUI));a.Loca&&e.push(y(a.Loca));return Promise.all(e)}function x(a){return new Promise(function(p,h){var c=[];if(a.plugins)for(var b=0;b<a.plugins.length;b+=1)-1==g.AMapUI.plugins.indexOf(a.plugins[b])&&c.push(a.plugins[b]);if(l.AMapUI===e.failed)h("\u524d\u6b21\u8bf7\u6c42 AMapUI \u5931\u8d25");else if(l.AMapUI===e.notload){l.AMapUI=e.loading;g.AMapUI.version=a.version||g.AMapUI.version;b=
+g.AMapUI.version;var m=document.body||document.head,k=document.createElement("script");k.type="text/javascript";k.src="https://webapi.amap.com/ui/"+b+"/main.js";k.onerror=function(a){l.AMapUI=e.failed;h("\u8bf7\u6c42 AMapUI \u5931\u8d25")};k.onload=function(){l.AMapUI=e.loaded;if(c.length)window.AMapUI.loadUI(c,function(){for(var a=0,b=c.length;a<b;a++){var d=c[a].split("/").slice(-1)[0];window.AMapUI[d]=arguments[a]}for(p();n.AMapUI.length;)n.AMapUI.splice(0,1)[0]()});else for(p();n.AMapUI.length;)n.AMapUI.splice(0,
+1)[0]()};m.appendChild(k)}else l.AMapUI===e.loaded?a.version&&a.version!==g.AMapUI.version?h("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c AMapUI \u6df7\u7528"):c.length?window.AMapUI.loadUI(c,function(){for(var a=0,b=c.length;a<b;a++){var d=c[a].split("/").slice(-1)[0];window.AMapUI[d]=arguments[a]}p()}):p():a.version&&a.version!==g.AMapUI.version?h("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c AMapUI \u6df7\u7528"):n.AMapUI.push(function(a){a?h(a):c.length?window.AMapUI.loadUI(c,function(){for(var a=
+0,b=c.length;a<b;a++){var f=c[a].split("/").slice(-1)[0];window.AMapUI[f]=arguments[a]}p()}):p()})})}function y(a){return new Promise(function(p,h){if(l.Loca===e.failed)h("\u524d\u6b21\u8bf7\u6c42 Loca \u5931\u8d25");else if(l.Loca===e.notload){l.Loca=e.loading;g.Loca.version=a.version||g.Loca.version;var c=g.Loca.version,b=g.AMap.version.startsWith("2"),m=c.startsWith("2");if(b&&!m||!b&&m)h("JSAPI \u4e0e Loca \u7248\u672c\u4e0d\u5bf9\u5e94\uff01\uff01");else{b=g.key;m=document.body||document.head;
+var k=document.createElement("script");k.type="text/javascript";k.src="https://webapi.amap.com/loca?v="+c+"&key="+b;k.onerror=function(a){l.Loca=e.failed;h("\u8bf7\u6c42 AMapUI \u5931\u8d25")};k.onload=function(){l.Loca=e.loaded;for(p();n.Loca.length;)n.Loca.splice(0,1)[0]()};m.appendChild(k)}}else l.Loca===e.loaded?a.version&&a.version!==g.Loca.version?h("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c Loca \u6df7\u7528"):p():a.version&&a.version!==g.Loca.version?h("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c Loca \u6df7\u7528"):
+n.Loca.push(function(a){a?h(a):h()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var e;(function(a){a.notload="notload";a.loading="loading";a.loaded="loaded";a.failed="failed"})(e||(e={}));var g={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},l={AMap:e.notload,AMapUI:e.notload,Loca:e.notload},n={AMap:[],AMapUI:[],Loca:[]},v=[],z=function(a){"function"==typeof a&&(l.AMap===e.loaded?a(window.AMap):v.push(a))};return{load:function(a){var p=
+this;return new Promise(function(h,c){if(l.AMap==e.failed)c("");else if(l.AMap==e.notload){var b=a.key,m=a.version,k=a.plugins;if(b){window.AMap&&"lbs.amap.com"!==location.host&&c("\u7981\u6b62\u591a\u79cdAPI\u52a0\u8f7d\u65b9\u5f0f\u6df7\u7528");g.key=b;g.AMap.version=m||g.AMap.version;g.AMap.plugins=k||g.AMap.plugins;l.AMap=e.loading;var f=document.body||document.head;window.___onAPILoaded=function(b){delete window.___onAPILoaded;if(b)l.AMap=e.failed,c(b);else for(l.AMap=e.loaded,t(a).then(function(){h(window.AMap)})["catch"](c);v.length;)v.splice(0,
+1)[0]()};var n=document.createElement("script");n.type="text/javascript";b="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+g.AMap.version+"&key="+b+"&plugin="+g.AMap.plugins.join(",");fetch(b).then(function(a){return q(p,void 0,void 0,function(){var b;return r(this,function(c){switch(c.label){case 0:return[4,a.text()];case 1:return b=c.sent(),n.textContent=b.replace("define.amd","undefined"),f.appendChild(n),[2]}})})})["catch"](function(a){l.AMap=e.failed;c(a)})}else c("\u8bf7\u586b\u5199key")}else if(l.AMap==
+e.loaded)if(a.key&&a.key!==g.key)c("\u591a\u4e2a\u4e0d\u4e00\u81f4\u7684 key");else if(a.version&&a.version!==g.AMap.version)c("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c JSAPI \u6df7\u7528");else{b=[];if(a.plugins)for(m=0;m<a.plugins.length;m+=1)-1==g.AMap.plugins.indexOf(a.plugins[m])&&b.push(a.plugins[m]);if(b.length)window.AMap.plugin(b,function(){t(a).then(function(){h(window.AMap)})["catch"](c)});else t(a).then(function(){h(window.AMap)})["catch"](c)}else if(a.key&&a.key!==g.key)c("\u591a\u4e2a\u4e0d\u4e00\u81f4\u7684 key");
+else if(a.version&&a.version!==g.AMap.version)c("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c JSAPI \u6df7\u7528");else{var d=[];if(a.plugins)for(m=0;m<a.plugins.length;m+=1)-1==g.AMap.plugins.indexOf(a.plugins[m])&&d.push(a.plugins[m]);z(function(){if(d.length)window.AMap.plugin(d,function(){t(a).then(function(){h(window.AMap)})["catch"](c)});else t(a).then(function(){h(window.AMap)})["catch"](c)})}})},reset:function(){delete window.AMap;delete window.AMapUI;delete window.Loca;g={key:"",AMap:{version:"1.4.15",
+plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}};l={AMap:e.notload,AMapUI:e.notload,Loca:e.notload};n={AMap:[],AMapUI:[],Loca:[]}}}})
diff --git a/src/index.ts b/src/index.ts
index 229d46752d66b28adb9213c3ce7eb48829d64ff1..a7b3e9ca05a72d2580719bc0da09c25c511e068e 100644
--- a/src/index.ts
+++ b/src/index.ts
@@ -252,18 +252,27 @@ const load = function (options: LoadOption) {
             const script = document.createElement("script");
             script.type = "text/javascript";
 
-            script.src =
-                "https://webapi.amap.com/maps?callback=___onAPILoaded&v=" +
-                config.AMap.version +
-                "&key=" +
-                key +
-                "&plugin=" +
-                config.AMap.plugins.join(",");
-            script.onerror = (e) => {
+ 
+            const src =
+            "https://webapi.amap.com/maps?callback=___onAPILoaded&v=" +
+            config.AMap.version +
+            "&key=" +
+            key +
+            "&plugin=" +
+            config.AMap.plugins.join(",");
+            fetch(src).then(async res => {
+                const text = await res.text();
+                script.textContent = text.replace('define.amd', 'undefined');
+                parentNode.appendChild(script);
+            }).catch(e => {
                 Status.AMap = LoadStatus.failed;
                 reject(e);
-            };
-            parentNode.appendChild(script);
+            });
+            // script.onerror = (e) => {
+            //     Status.AMap = LoadStatus.failed;
+            //     reject(e);
+            // };
+            // parentNode.appendChild(script);
         } else if (Status.AMap == LoadStatus.loaded) {
             //deal multi load
             if (options.key && options.key !== config.key) {
