System.register([],(function(e){"use strict";return{execute:function(){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const h=/^on[^a-z]/,d=e=>h.test(e),c=Object.assign,l=Array.isArray,u=e=>"function"==typeof e,p=e=>"string"==typeof e,f=e=>null!==e&&"object"==typeof e;let v;const m=()=>v||(v="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});function g(e){if(l(e)){const t={};for(let i=0;i<e.length;i++){const n=e[i],s=p(n)?x(n):g(n);if(s)for(const e in s)t[e]=s[e]}return t}return p(e)||f(e)?e:void 0}const k=/;(?![^(]*\))/g,y=/:([^]+)/,b=/\/\*[^]*?\*\//g;function x(e){const t={};return e.replace(b,"").split(k).forEach((e=>{if(e){const i=e.split(y);i.length>1&&(t[i[0].trim()]=i[1].trim())}})),t}function C(e){let t="";if(p(e))t=e;else if(l(e))for(let i=0;i<e.length;i++){const n=C(e[i]);n&&(t+=n+" ")}else if(f(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}function N(e){return L(e)?N(e.__v_raw):!(!e||!e.__v_isReactive)}function L(e){return!(!e||!e.__v_isReadonly)}function E(e){return N(e)||L(e)}let w=null;const S=Symbol.for("v-ndc"),_=Symbol.for("v-fgt"),I=Symbol.for("v-txt"),F=Symbol.for("v-cmt");function T(e){return!!e&&!0===e.__v_isVNode}const O="__vInternal",P=({key:e})=>null!=e?e:null,H=({ref:e,ref_key:t,ref_for:i})=>{return"number"==typeof e&&(e=""+e),null!=e?p(e)||(n=e)&&!0===n.__v_isRef||u(e)?{i:w,r:e,k:t,f:!!i}:e:null;var n};const M=function(e,t=null,i=null,n=0,s=null,a=!1){e&&e!==S||(e=F);if(T(e)){const n=D(e,t,!0);return i&&B(n,i),n.patchFlag|=-2,n}r=e,u(r)&&"__vccOpts"in r&&(e=e.__vccOpts);var r;if(t){t=function(e){return e?E(e)||O in e?c({},e):e:null}(t);let{class:e,style:i}=t;e&&!p(e)&&(t.class=C(e)),f(i)&&(E(i)&&!l(i)&&(i=c({},i)),t.style=g(i))}const o=p(e)?1:(e=>e.__isSuspense)(e)?128:(e=>e.__isTeleport)(e)?64:f(e)?4:u(e)?2:0;return function(e,t=null,i=null,n=0,s=null,a=(e===_?0:1),r=!1,o=!1){const h={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&P(t),ref:t&&H(t),scopeId:null,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:w};return o?(B(h,i),128&a&&e.normalize(h)):i&&(h.shapeFlag|=p(i)?8:16),h}(e,t,i,n,s,o,a,!0)};function D(e,t,i=!1){const{props:n,ref:s,patchFlag:a,children:r}=e,o=t?function(...e){const t={};for(let i=0;i<e.length;i++){const n=e[i];for(const e in n)if("class"===e)t.class!==n.class&&(t.class=C([t.class,n.class]));else if("style"===e)t.style=g([t.style,n.style]);else if(d(e)){const i=t[e],s=n[e];!s||i===s||l(i)&&i.includes(s)||(t[e]=i?[].concat(i,s):s)}else""!==e&&(t[e]=n[e])}return t}(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:o,key:o&&P(o),ref:t&&t.ref?i&&s?l(s)?s.concat(H(t)):[s,H(t)]:H(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:r,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==_?-1===a?16:16|a:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&D(e.ssContent),ssFallback:e.ssFallback&&D(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function R(e=" ",t=0){return M(I,null,e,t)}function B(e,t){let i=0;const{shapeFlag:n}=e;if(null==t)t=null;else if(l(t))i=16;else if("object"==typeof t){if(65&n){const i=t.default;return void(i&&(i._c&&(i._d=!1),B(e,i()),i._c&&(i._d=!0)))}{i=32;const e=t._;e||O in t||(t._ctx=w)}}else u(t)?(t={default:t,_ctx:w},i=32):(t=String(t),64&n?(i=16,t=[R(t)]):i=8);e.children=t,e.shapeFlag|=i}let z,j=null,$="__VUE_INSTANCE_SETTERS__";(z=m()[$])||(z=m()[$]=[]),z.push((e=>j=e));var A=function(e,t){var i=t.store.slots[e];if(i){var n=i.node.cloneNode(!0);n.classList.add("vs-tree-text"),n.setAttribute("tree-node-id",t.id),t.__buffer={};var s="\n        var ".concat(i.scope," = _;\n      ");return i.text.replace(i.interpolate,(function(e,t){s+="_.__buffer['".concat(e,"'] = ").concat(t,";")})),new Function("_",s).call(t,t),n.innerText=n.innerText.replace(i.interpolate,(function(e){return t.__buffer[e]})).replace(/\n/g,""),n}return!1},K=0,V=function(){function e(n){if(i(this,e),this.id=K++,this.checked=!1,this.expanded=!1,this.indeterminate=!1,this.visbile=!1,this.disabled=!1,this.loaded=!1,this.isLeaf=!1,this.level=0,this.childNodes=[],this.store=n.store,this.parent=n.parent,this.originData=n.data,this.customNodeClick=n.customNodeClick,this.__buffer={},this.data=Object.assign({},n.data),"function"==typeof this.store.format&&!n.data._vsroot){var s=this.store.format(Object.assign({},n.data),this);if("object"!==t(s))throw new Error("format must return object! \nformat: function(data) {\n  return {id, name, children, isLeaf}\n}");for(var a=["id","name","children","isLeaf","icon","extra"],r=0,o=a.length;r<o;r++)Object.prototype.hasOwnProperty.call(s,a[r])&&(this.data[a[r]]=s[a[r]])}this.store.checkInherit&&this.parent&&(this.checked=this.parent.checked),this.store.checkedKeys&&this.store.checkedKeys.includes(this.data.id)&&(this.checked=this.store.checkedKeys.includes(this.data.id)||this.checked),this.store.disabledInherit&&this.parent&&(this.disabled=this.parent.disabled),this.store.expandKeys.includes(this.data.id)&&(this.expanded=!0),this.store.disabledKeys.includes(this.data.id)&&(this.disabled=!0),this.parent&&(this.level=this.parent.level+1),this.data&&this.setData(this.data),this.initData()}return s(e,[{key:"initData",value:function(){var e;!(this.level>this.store.expandLevel&&-1!==this.store.expandLevel)||null!==(e=this.parent)&&void 0!==e&&e.expanded?this.visbile=!0:this.visbile=!1}},{key:"createNode",value:function(){var e=this;if(this.dom)return this.checkboxNode&&(this.checkboxNode.checked=this.checked),this.radioNode&&(this.radioNode.checked=this.checked),this.indeterminate&&this.dom.classList.add("is-indeterminate"),this.dom;var t=document.createElement("div");t.className="vs-tree-node ".concat(this.isLeaf?"vs-tree-node--leaf":"vs-tree-node--noLeaf"),t.setAttribute("vs-index",this.id),this.indeterminate&&t.classList.add("is-indeterminate"),!this.isLeaf&&this.childNodes.length&&t.setAttribute("vs-child",!0),t.appendChild(this.createInner());var i=A("append",this);return i?t.appendChild(i):this.store.renderContent&&t.appendChild(this.createContent()),t.addEventListener("click",(function(i){e.store.highlightCurrent&&(e.store.selectedCurrent&&e.store.selectedCurrent.dom.classList.remove("selected"),t.classList.add("selected")),e.store.selectedCurrent=e,i.stopPropagation(),e.customNodeClick?e.customNodeClick(i,e):(!e.store.checkOnClickNode||e.disabled||e.store.breadcrumb&&!e.isLeaf||e.handleCheckChange({target:{checked:!e.checked}}),e.store.breadcrumb&&!e.isLeaf&&(e.store.breadcrumb.list.push(e),e.setExpand(!0)),e.store.click(i,e))}),{passive:!1}),t.addEventListener("contextmenu",(function(t){e.store.contextmenu&&"function"==typeof e.store.contextmenu&&(t.stopPropagation(),t.preventDefault(),e.store.contextmenu(t,e))})),this.store.draggable&&this.createDragable(t),this.dom=t,t}},{key:"createInner",value:function(){var e=document.createElement("div");e.className="vs-tree-inner";var t,i=this.level+(this.store.hideRoot?-1:0);if(this.store.breadcrumb&&(i=0),this.store.showLine)for(var n=0;n<i;n++){var s=document.createElement("span");s.className="vs-indent-unit",e.appendChild(s)}else e.style.paddingLeft=i*this.store.indent+"px";if(this.store.breadcrumb)this.loadingEl=document.createElement("span"),this.loadingEl.className="vs-loading-unit",e.appendChild(this.loadingEl);else{var a;if(this.store.strictLeaf)t=this.isLeaf?this.createExpandEmpty():this.createExpand();else t=(null!==(a=this.childNodes)&&void 0!==a&&a.length||this.store.lazy)&&!this.isLeaf?this.createExpand():this.createExpandEmpty();e.appendChild(t)}return(this.store.showCheckbox||this.store.showRadio)&&(!this.store.nocheckParent||this.isLeaf&&!this.childNodes.length)&&e.appendChild(this.createCheckbox()),this.store.showIcon&&(this.store.onlyShowLeafIcon&&this.childNodes.length&&!this.isLeaf||e.appendChild(this.createIcon())),e.appendChild(this.createText()),e}},{key:"cusmtomNode",value:function(e,t){var i=this,n=document.createElement(e);return t.text&&(n.innerText=t.text),t.className&&(n.className=t.className),t.children&&t.children.forEach((function(e){n.appendChild(e)})),"function"==typeof t.click&&n.addEventListener("click",(function(e){e.stopPropagation(),t.click(e,i)}),{passive:!1}),n}},{key:"createContent",value:function(){var e=this.store.renderContent(this.cusmtomNode.bind(this),this);return e?(e.addEventListener("click",(function(e){e.stopPropagation()}),{passive:!1}),e):document.createElement("span")}},{key:"createExpandEmpty",value:function(){var e=document.createElement("span");return e.className="expand-empty "+this.store.expandClass,e}},{key:"createExpand",value:function(){var e=this,t=document.createElement("span");return t.className="expand "+this.store.expandClass,(this.level<this.store.expandLevel||-1===this.store.expandLevel||this.expanded)&&(t.classList.add("expanded"),this.expanded=!0),t.addEventListener("click",(function(i){if(i.stopPropagation(),!e.loading){var n=!t.classList.contains("expanded");e.setExpand(n)}}),{passive:!1}),this.expandEl=t,t}},{key:"createCheckbox",value:function(){var e=this,t="checkbox";this.store.showRadio&&(t="radio");var i=document.createElement("label");i.className="vs-".concat(t);var n=document.createElement("span");n.className="vs-".concat(t,"__inner");var s=document.createElement("input");return s.type=t,s.checked=this.checked,s.disabled=this.disabled,s.className="vs-".concat(t,"__original"),s.name="radio"===t?"vs-radio"+(this.store.radioParentoOnly&&this.parent?this.parent.id:""):"vs-checkbox","radio"===t?(s.name="vs-radio"+(this.store.radioParentoOnly&&this.parent?this.parent.id:""),this.radioNode=s):(s.name="vs-checkbox",this.checkboxNode=s),i.appendChild(s),i.appendChild(n),i.addEventListener("click",(function(e){e.stopPropagation()}),{passive:!1}),s.addEventListener("click",(function(t){e.store.check(t,e)}),{passive:!1}),s.addEventListener("change",(function(t){t.stopPropagation(),e.handleCheckChange(t)})),this.checkboxEl=s,i}},{key:"handleCheckChange",value:function(e){var t=e.target.checked;if("function"!=typeof this.store.beforeCheck||this.store.beforeCheck(this)){if(t&&this.store.checkMaxNodes(this))return this.store.limitAlert(),void(e.target.checked=!1);this.store.showRadio?this.updateRadioChecked(t):(this.updateChecked(t),this.updateCheckedParent(t)),this.store._change(this)}else e.target.checked=!t}},{key:"createText",value:function(){var e=A("name",this);if(e)return e;var t=document.createElement("span");return t.innerText=this.data.name,t.className="vs-tree-text",t}},{key:"createIcon",value:function(){var e=document.createElement("span");return e.className=this.isLeaf&&!this.childNodes.length?"vs-icon-leaf":"vs-icon-parent",this.data.icon&&(this.data.icon instanceof HTMLElement?(e.style.backgroundImage="none",e.appendChild(this.data.icon)):e.classList.add(this.data.icon)),e}},{key:"setData",value:function(t){var i;this.store.dataMap.set(t.id,this),this.store.nodeMap.set(this.id,this),this.data=t,this.childNodes=[],"boolean"==typeof t.isLeaf?this.isLeaf=t.isLeaf:t.children||this.store.lazy||(this.isLeaf=!0),(i=0===this.level&&this.data instanceof e?this.data:this.data.children||[]).length&&(this.loaded=!0);for(var n=0,s=i.length;n<s;n++)this.insertChild({data:i[n]})}},{key:"insertChild",value:function(t,i){return t instanceof e||(Object.assign(t,{parent:this,store:this.store,customNodeClick:this.customNodeClick}),t=new e(t)),t.level=this.level+1,void 0===i||i<0?this.childNodes.push(t):this.childNodes.splice(i,0,t),t}},{key:"insertBefore",value:function(e,t){var i;t&&(i=this.childNodes.indexOf(t)),this.insertChild(e,i)}},{key:"insertAfter",value:function(e,t){var i;t&&-1!==(i=this.childNodes.indexOf(t))&&(i+=1),this.insertChild(e,i)}},{key:"updateExpand",value:function(e){var t=this;this.childNodes.length&&this.childNodes.forEach((function(i){e&&t.expanded?i.visbile=!0:i.visbile=!1,i.updateExpand(e)}))}},{key:"updateChecked",value:function(e,t){!t&&this.disabled||this.store.showCheckbox&&(this.checked=e,this.sortId=Date.now(),this.checkboxNode&&(this.checkboxNode.checked=e),this.dom&&this.dom.classList.remove("is-indeterminate"),this.store.allowEmit(e,"p")&&this.parent&&(this.parent.indeterminate=!1),this.store.allowEmit(e,"s")&&this.childNodes.length&&this.childNodes.forEach((function(t){t.updateChecked(e)})))}},{key:"updateCheckedParent",value:function(e,t){if((t||!this.disabled)&&this.store.showCheckbox&&this.store.allowEmit(e,"p")&&this.parent&&!this.store.nocheckParent){var i=this.parent.childNodes.every((function(e){return e.checked})),n=this.parent.childNodes.some((function(e){return e.checked||e.indeterminate}));i?(this.parent.checked=!0,this.parent.indeterminate=!1,this.parent.checkboxNode&&(this.parent.checkboxNode.checked=!0),this.parent.dom&&this.parent.dom.classList.remove("is-indeterminate")):n?(this.parent.checked=!1,this.parent.indeterminate=!0,this.parent.checkboxNode&&(this.parent.checkboxNode.checked=!1),this.parent.dom&&this.parent.dom.classList.add("is-indeterminate")):(this.parent.checked=!1,this.parent.indeterminate=!1,this.parent.checkboxNode&&(this.parent.checkboxNode.checked=!1),this.parent.dom&&this.parent.dom.classList.remove("is-indeterminate")),this.parent.updateCheckedParent()}}},{key:"updateRadioChecked",value:function(e,t){!t&&this.disabled||(!this.store.nocheckParent||!this.childNodes.length&&this.isLeaf)&&(this.store.radioParentoOnly?(this.store.radioMap[this.parent.id]&&(this.store.radioMap[this.parent.id].checked=!1),this.store.radioMap[this.parent.id]=this):(this.store.radioNode&&(this.store.radioNode=!1),this.store.radioNode=this),this.checked=e,this.radioNode&&(this.radioNode.checked=e))}},{key:"setChecked",value:function(e,t){e&&this.store.checkMaxNodes(this)?this.store.limitAlert():this.store.showRadio?this.updateRadioChecked(e,t):this.store.showCheckbox&&(this.updateChecked(e,t),this.updateCheckedParent(e,t),this.store._change(this))}},{key:"setDisabled",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.disabled=e,this.checkboxEl&&(this.checkboxEl.disabled=e)}},{key:"setExpand",value:function(e,t){var i=this;this.expanded=e,this.updateExpand(this.expanded),this.setAccordion(e),this.expandEl&&(e?this.expandEl.classList.add("expanded"):this.expandEl.classList.remove("expanded")),this.store.lazy&&!this.loaded?this.loadData((function(e){e&&!t&&i.storeUpdate()})):!t&&this.storeUpdate()}},{key:"storeUpdate",value:function(){this.store.animation?this.createAnimation():this.store.update()}},{key:"createAnimation",value:function(){var e=this;this.transitionNode&&this.transitionNode.parentNode&&this.transitionNode.parentNode.removeChild(this.transitionNode);var t,i,n,s=document.createElement("div");if(s.className="vs-transition",this.childNodes.length>this.store.showCount)for(var a=0;a<this.store.showCount-1;a++){var r=this.childNodes[a];s.appendChild(r.dom||r.createNode())}else this.childNodes.forEach((function(e){s.appendChild(e.dom||e.createNode())}));t=s,i=this.dom,(n=i.parentNode)&&(n.lastChild===i?n.appendChild(t):n.insertBefore(t,i.nextSibling));var o=(this.childNodes.length>this.store.showCount?this.store.showCount:this.childNodes.length)*this.store.itemHeight+"px";this.expanded?setTimeout((function(){s.style.height=o}),0):(s.style.height=o,setTimeout((function(){s.style.height=0}),0));s.addEventListener("transitionend",(function t(){s.removeEventListener("transitionend",t),s.parentNode&&s.parentNode.removeChild(s),s.removeEventListener("transitionend",t),e.store.update()})),this.transitionNode=s}},{key:"createDragable",value:function(e){var t=this;function i(e){e&&(e.classList.remove("vs-drag-enter"),e.classList.remove("vs-drag-over-gap-bottom"),e.classList.remove("vs-drag-over-gap-top"))}e.draggable=!0,e.addEventListener("dragstart",(function(e){e.stopPropagation(),t.store.dragNode=t,t.store.onDragstart(e,t);try{e.dataTransfer.setData("text/plain","")}catch(e){}})),e.addEventListener("dragover",(function(e){e.preventDefault()})),e.addEventListener("dragenter",(function(e){e.stopPropagation(),e.preventDefault(),i(t.store.dropNode);var n=t.dom;if(n){var s=function(e,t){var i=t.getBoundingClientRect().top,n=t.offsetHeight,s=e.pageY;return s>i+n-n?1:s<i+2?-1:0}(e,n);if((t.store.dragNode.dom!==n||0!==s)&&(t.store.dropPostion=s,t.store.dropNode=n,t.store.onDragenter(e,t,n,s),t.store.dropable)){if(t.expanded||t.isLeaf||t.setExpand(!0),-1===s)return void n.classList.add("vs-drag-over-gap-top");if(1===s)return void n.classList.add("vs-drag-over-gap-bottom");t.isLeaf||n.classList.add("vs-drag-enter")}}})),e.addEventListener("dragleave",(function(e){t.store.dropable&&i(e.target)})),e.addEventListener("drop",(function(e){if(e.stopPropagation(),t.store.onDrop(e,t,t.store.dropPostion),t.store.dropable){i(t.store.dropNode);var n=t.store.dragNode;if(n&&t.parent){var s=Object.assign({},n.data);if(n.remove(),!s)return;-1===t.store.dropPostion?(t.parent.insertBefore({data:s},t),t.updateCheckedParent(),t.store.updateNodes()):1===t.store.dropPostion?(t.parent.insertAfter({data:s},t),t.updateCheckedParent(),t.store.updateNodes()):t.isLeaf||t.append(s)}}}))}},{key:"setAccordion",value:function(e){if(this.store.accordion&&this.parent&&e){var t=this.store.expandMap[this.parent.id];if(t===this)return;t&&t.setExpand(!1),this.store.expandMap[this.parent.id]=this}}},{key:"loadData",value:function(e){var t=this;if(!this.loading){this.loading=!0,this.expandEl?this.expandEl.classList.add("is-loading"):this.loadingEl&&this.loadingEl.classList.add("is-loading");this.store.load(this,(function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.loaded=!0,t.loading=!1,t.expandEl?t.expandEl.classList.remove("is-loading"):t.loadingEl&&t.loadingEl.classList.remove("is-loading"),i.length&&(i.forEach((function(e){t.insertChild({data:e,store:t.store})})),t.childNodes[0].updateCheckedParent(),t.store.updateNodes()),e&&e.call(t,i)}))}}},{key:"remove",value:function(){var e=this,t=this.parent;if(t){var i=t.childNodes||[],n=i.findIndex((function(t){return t.id===e.id}));n>-1&&i.splice(n,1),this.store.updateNodes()}}},{key:"append",value:function(e){if(e&&"object"===t(e)){var i=this.dom;0!==this.childNodes.length&&(i=null);var n=this.insertChild({data:e,store:this.store});this.data.children?this.data.children.push(e):this.data.children=[e],this.isLeaf=!1,i&&(delete this.dom,i.parentNode.replaceChild(this.createNode(),i)),n.updateCheckedParent(),this.store.updateNodes()}}}]),e}(),q=function(){function e(t){for(var n in i(this,e),t)Object.prototype.hasOwnProperty.call(t,n)&&(this[n]=t[n]);this.nodes=[],this.dataMap=new Map,this.nodeMap=new Map,this.radioMap={},this.expandMap={},this.root=new V({data:this.data,store:this,customNodeClick:this.customNodeClick}),this.updateNodes(),this.breadcrumb&&this.breadcrumb.list.push(this.root),this.changeNodes=[]}return s(e,[{key:"setData",value:function(e){this.root.childNodes=[],this.root.setData(e),this.updateNodes()}},{key:"updateNodes",value:function(){this.nodes=this.flattenTreeData(),this.nodesChange(this.nodes)}},{key:"flattenTreeData",value:function(){var e=[];return function t(i){if(e.push(i),i.childNodes&&i.childNodes.length)for(var n=0,s=i.childNodes.length;n<s;n++)t(i.childNodes[n])}(this.root),e}},{key:"getNodeById",value:function(e){return this.dataMap.get(e)}},{key:"getCheckedNodes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.nodes.filter((function(t){return t.checked&&!t.data._vsroot&&e._checkVerify(t)&&(!e.nocheckParent||!t.childNodes.length)}));if(this.sort){var n=i.sort((function(e,t){return e.sortId-t.sortId}));return t?n:n.map((function(e){return e.data}))}return t?i:i.map((function(e){return e.data}))}},{key:"setDefaultChecked",value:function(){var e=this;this.checkedKeys.forEach((function(t){var i=e.getNodeById(t);i?i.setChecked(!0,!0):console.warn("not found node by "+t)}))}},{key:"checkMaxNodes",value:function(e){if(!this.max)return!1;if(!e.checked&&e.hasChildCount>this.max)return!0;var t=this.getCheckedNodes().length;return!e.checked&&t+(e.isLeaf?1:this.getUnCheckLeafsCount(e))>this.max}},{key:"getUnCheckLeafsCount",value:function(e){var t=this,i=this._checkVerify(e)&&!e.checked?1:0;return e.childNodes.forEach((function(e){i+=t.getUnCheckLeafsCount(e)})),i}},{key:"allowEmit",value:function(e,t){var i=this.checkboxType,n=i.Y,s=i.N;if(e){if(!n.includes(t))return!1}else if(!s.includes(t))return!1;return!0}},{key:"_checkVerify",value:function(e){return"function"==typeof this.checkFilter?this.checkFilter(e):!this.checkFilterLeaf||e.isLeaf}},{key:"_change",value:function(e){var t=this;this.changeNodes.push(e),this._changeTimer&&clearTimeout(this._changeTimer),this._changeTimer=setTimeout((function(){t.change(t.changeNodes),t.changeNodes=[]}),0)}}]),e}(),U="FRONT",Y="BEHIND",X="INIT",G="FIXED",J=function(){function e(t,n){i(this,e),this.init(t,n)}return s(e,[{key:"init",value:function(e,t){this.param=e,this.callUpdate=t,this.sizes=new Map,this.firstRangeTotalSize=0,this.firstRangeAverageSize=0,this.lastCalcIndex=0,this.fixedSizeValue=0,this.calcType=X,this.offset=0,this.direction="",this.range=Object.create(null),e&&this.checkRange(0,e.keeps-1)}},{key:"destroy",value:function(){this.init(null,null)}},{key:"getRange",value:function(){var e=Object.create(null);return e.start=this.range.start,e.end=this.range.end,e.padFront=this.range.padFront,e.padBehind=this.range.padBehind,e}},{key:"isBehind",value:function(){return this.direction===Y}},{key:"isFront",value:function(){return this.direction===U}},{key:"getOffset",value:function(e){return(e<1?0:this.getIndexOffset(e))+this.param.slotHeaderSize}},{key:"updateParam",value:function(e,t){var i=this;this.param&&e in this.param&&("uniqueIds"===e&&this.sizes.forEach((function(e,n){t.includes(n)||i.sizes.delete(n)})),this.param[e]=t)}},{key:"handleDataSourcesChange",value:function(){var e=this.range.start;this.isFront()?e-=2:this.isBehind()&&(e+=2),e=Math.max(e,0),this.updateRange(this.range.start,this.getEndByStart(e))}},{key:"handleSlotSizeChange",value:function(){this.handleDataSourcesChange()}},{key:"handleScroll",value:function(e){this.direction=e<this.offset?U:Y,this.offset=e,this.param&&(this.direction===U?this.handleFront():this.direction===Y&&this.handleBehind())}},{key:"handleFront",value:function(){var e=this.getScrollOvers();if(!(e>this.range.start)){var t=Math.max(e-this.param.buffer,0);this.checkRange(t,this.getEndByStart(t))}}},{key:"handleBehind",value:function(){var e=this.getScrollOvers();e<this.range.start+this.param.buffer||this.checkRange(e,this.getEndByStart(e))}},{key:"getScrollOvers",value:function(){var e=this.offset-this.param.slotHeaderSize;if(e<=0)return 0;if(this.isFixedType())return Math.floor(e/this.fixedSizeValue);for(var t=0,i=0,n=0,s=this.param.uniqueIds.length;t<=s;){if(i=t+Math.floor((s-t)/2),(n=this.getIndexOffset(i))===e)return i;n<e?t=i+1:n>e&&(s=i-1)}return t>0?--t:0}},{key:"getIndexOffset",value:function(e){if(!e)return 0;for(var t=0,i=0,n=0;n<e;n++)t+="number"==typeof(i=this.sizes.get(this.param.uniqueIds[n]))?i:this.getEstimateSize();return this.lastCalcIndex=Math.max(this.lastCalcIndex,e-1),this.lastCalcIndex=Math.min(this.lastCalcIndex,this.getLastIndex()),t}},{key:"isFixedType",value:function(){return this.calcType===G}},{key:"getLastIndex",value:function(){return this.param.uniqueIds.length-1}},{key:"checkRange",value:function(e,t){var i=this.param.keeps;this.param.uniqueIds.length<=i?(e=0,t=this.getLastIndex()):t-e<i-1&&(e=t-i+1),this.range.start!==e&&this.updateRange(e,t)}},{key:"updateRange",value:function(e,t){this.range.start=e,this.range.end=t,this.range.padFront=this.getPadFront(),this.range.padBehind=this.getPadBehind(),this.callUpdate(this.getRange())}},{key:"getEndByStart",value:function(e){var t=e+this.param.keeps-1;return Math.min(t,this.getLastIndex())}},{key:"getPadFront",value:function(){return this.isFixedType()?this.fixedSizeValue*this.range.start:this.getIndexOffset(this.range.start)}},{key:"getPadBehind",value:function(){var e=this.range.end,t=this.getLastIndex();return this.isFixedType()?(t-e)*this.fixedSizeValue:this.lastCalcIndex===t?this.getIndexOffset(t)-this.getIndexOffset(e):(t-e)*this.getEstimateSize()}},{key:"getEstimateSize",value:function(){return this.isFixedType()?this.fixedSizeValue:this.firstRangeAverageSize||this.param.estimateSize}}]),e}(),Q=function(){function e(t){i(this,e),this.range=null,this.$el=t.root,this.$el.style.maxHeight="number"==typeof t.maxHeight?t.maxHeight+"px":t.maxHeight,this.$el.style.minHeight="number"==typeof t.minHeight?t.minHeight+"px":t.minHeight,this.$el.style.overflowY="auto",this.dataSources=t.data,this.wrapper=document.createElement("div"),this.wrapper.className="vs-virtual-list",this.$el.appendChild(this.wrapper),this.$el.addEventListener("scroll",this.onScroll.bind(this),{passive:!1}),this.keeps=t.keeps||20,this.estimateSize=t.estimateSize||26,this.dataKey="id",this.installVirtual()}return s(e,[{key:"getOffset",value:function(){var e=this.$el;return e?Math.ceil(e.scrollTop):0}},{key:"getClientSize",value:function(){var e=this.$el;return e?Math.ceil(e.clientHeight):0}},{key:"getScrollSize",value:function(){var e=this.$el;return e?Math.ceil(e.scrollHeight):0}},{key:"scrollToIndex",value:function(e){if(e>=this.dataSources.length-1)this.scrollToBottom();else{var t=this.virtual.getOffset(e);this.scrollToOffset(t)}}},{key:"reset",value:function(){this.virtual.destroy(),this.scrollToOffset(0),this.installVirtual()}},{key:"installVirtual",value:function(){this.virtual=new J({slotHeaderSize:0,slotFooterSize:0,keeps:this.keeps,estimateSize:this.estimateSize,buffer:Math.round(this.keeps/3),uniqueIds:this.getUniqueIdFromDataSources()},this.onRangeChanged.bind(this)),this.range=this.virtual.getRange(),this.render()}},{key:"getUniqueIdFromDataSources",value:function(){var e=this.dataKey;return this.dataSources.map((function(t){return"function"==typeof e?e(t):t[e]}))}},{key:"onRangeChanged",value:function(e){this.range=e,this.render()}},{key:"onScroll",value:function(){var e=this.getOffset(),t=this.getClientSize(),i=this.getScrollSize();e<0||e+t>i+1||!i||this.virtual.handleScroll(e)}},{key:"getRenderSlots",value:function(){var e=this.range,t=e.start,i=e.end,n=this.dataSources,s=this.dataKey;this.wrapper.innerHTML="";for(var a=t;a<=i;a++){var r=n[a];if(r){var o="function"==typeof s?s(r):r[s];if("string"==typeof o||"number"==typeof o){var h=r.createNode();if(r.store.onlySearchLeaf?h.classList.add("vs-search-only-leaf"):h.classList.remove("vs-search-only-leaf"),r.store.isSearch&&r.store.searchRender){var d=r.store.searchRender(r,h.cloneNode(!0));if(!(d instanceof HTMLElement))throw Error("searchRender must return HTMLElement");this.wrapper.appendChild(d)}else this.wrapper.appendChild(h)}else console.warn("Cannot get the data-key '".concat(s,"' from data-sources."))}else console.warn("Cannot get the index '".concat(a,"' from data-sources."))}}},{key:"update",value:function(e){this.dataSources=e,this.wrapper.innerHTML="",this.virtual.updateParam("uniqueIds",this.getUniqueIdFromDataSources()),this.virtual.handleDataSourcesChange()}},{key:"render",value:function(){var e=this.range,t=e.padFront,i=e.padBehind,n="".concat(t,"px 0px ").concat(i,"px");this.wrapper.style.padding=n,this.getRenderSlots()}}]),e}(),W=function(){function e(t,n){i(this,e),this.node=t,this.data=t.data,this.store=t.store,this.parent=n;var s=this.parent.options,a=s.icon,r=s.link,o=s.separator,h=void 0===o?"/":o;this.renderIcon=a,this.renderLink=r,this.renderSeparator=h}return s(e,[{key:"createDom",value:function(){var e=this,t=this.parent.list,i=t.findIndex((function(t){return t===e.node})),n=i===t.length-1,s=document.createElement("span");if(this.renderIcon){var a=this.createIcon();a&&s.appendChild(a)}return s.appendChild(this.createLink(t,i,n)),n||s.appendChild(this.createSeparator()),s}},{key:"createIcon",value:function(){var e;if(!(e="function"==typeof this.renderIcon?this.renderIcon(this.node,this.data):this.renderIcon))return!1;var t=document.createElement("span");return t.className="vs-breadcrumb-icon","function"==typeof this.renderIcon?e instanceof HTMLElement?t.appendChild(e):t.innerHTML=e:t.innerHTML=this.renderIcon,t}},{key:"createLink",value:function(e,t,i){var n=this,s=document.createElement("span");if(s.className="vs-breadcrumb-link","function"==typeof this.renderLink){var a=this.renderLink(this.node,this.data);a instanceof HTMLElement?s.appendChild(a):s.innerHTML=a}else s.innerHTML=this.data.name;return s.addEventListener("click",(function(s){s.preventDefault(),s.stopPropagation(),i||(e.splice(t+1),n.store.update())})),s}},{key:"createSeparator",value:function(){var e=document.createElement("span");return e.className="vs-breadcrumb-separator","function"==typeof this.renderSeparator?e.innerHTML=this.renderSeparator(this.node,this.data):e.innerHTML=this.renderSeparator,e}}]),e}(),Z=function(){function e(t){i(this,e),this.list=[],this.options=t}return s(e,[{key:"renderBreadcrumb",value:function(){var e=this;this.store=this.current.store;var t,i=this.options,n=i.el,s=i.change,a=void 0===s?function(){}:s;n instanceof HTMLElement?t=n:n&&"string"==typeof n&&(t=document.querySelector(n)),t||(t=document.createElement("section")),t.classList.add("vs-breadcrumb");var r=this.list.map((function(t){return new W(t,e).createDom()}));t.innerHTML="",r.forEach((function(e){t.appendChild(e)})),a(t,this.list,this.current)}},{key:"current",get:function(){return this.list[this.list.length-1]}}]),e}(),ee=function(){},te=function(){function e(n,s){var a=this;if(i(this,e),this.$el="string"==typeof n?document.querySelector(n):n,!(this.$el instanceof HTMLElement))throw Error("请为组件提供根节点");this.$el.classList.add("vs-tree"),s.breadcrumb&&this.$el.classList.add("vs-tree-breadcrumb");var r=["#\\[\\[","\\]\\]"],o=r[0]+"([\\s\\S]+?)"+r[1];this.interpolate=new RegExp(o,"igm");var h={},d=this.$el.querySelectorAll("[tree-slot]");if(d&&d.length&&d.forEach((function(e){var t=e.attributes["tree-slot"].value,i=e.attributes["tree-slot-scope"].value;h[t]={scope:i,node:e,interpolate:a.interpolate,text:e.innerText,inner:e.outerHTML},e.parentNode.removeChild(e)})),s.theme&&this.$el.classList.add("vs-theme-"+s.theme),Array.isArray(s.data))this._data={_vsroot:!0,name:s.rootName||"---",children:s.data},s.rootName||(s.hideRoot=!0);else{if("object"!==t(s.data))throw Error("参数data仅支持对象或数组！");this._data=s.data}this.nodes=[];var c=s.virtual||{},l=c.showCount,u=void 0===l?20:l,p=c.itemHeight,f=void 0===p?26:p,v=c.maxHeight,m=void 0===v?"400px":v,g=c.minHeight,k=void 0===g?"0px":g;this.itemHeight=f,this.showCount=u,this.maxHeight=s.maxHeight||m,this.minHeight=s.minHeight||k,this.data=[],this.keyword="",this.searchFilter=s.searchFilter,this.ready=s.ready||ee,"[object Object]"===Object.prototype.toString.call(s.breadcrumb)&&(this.$$breadcrumb=new Z(s.breadcrumb));var y=function(){a.store=new q({data:a._data,max:s.max,slots:h,breadcrumb:a.$$breadcrumb||null,strictLeaf:s.strictLeaf||!1,showCount:a.showCount,itemHeight:a.itemHeight,hideRoot:s.hideRoot||!1,animation:s.animation||!1,expandLevel:"number"==typeof s.expandLevel?s.expandLevel:1,beforeCheck:s.beforeCheck||null,showLine:s.showLine||!1,showIcon:s.showIcon||!1,onlyShowLeafIcon:s.onlyShowLeafIcon||!1,showCheckbox:s.showCheckbox||!1,checkboxType:s.checkboxType||{Y:"ps",N:"ps"},checkInherit:s.checkInherit||!1,disabledInherit:s.disabledInherit||!1,showRadio:s.showRadio||!1,highlightCurrent:s.highlightCurrent||!1,checkFilterLeaf:s.checkFilterLeaf||!1,checkFilter:s.checkFilter||null,accordion:s.accordion||!1,draggable:s.draggable||!1,dropable:s.dropable||!1,lazy:s.lazy||!1,sort:s.sort||!1,indent:s.indent||10,checkedKeys:s.checkedKeys||[],expandKeys:s.expandKeys||[],disabledKeys:s.disabledKeys||[],limitAlert:s.limitAlert||ee,click:s.click||ee,check:s.check||ee,change:s.change||ee,load:s.load||ee,contextmenu:s.contextmenu||null,radioParentoOnly:"level"===s.radioType?"level":"all",renderContent:s.renderContent||null,nocheckParent:s.nocheckParent||!1,checkOnClickNode:s.checkOnClickNode||!1,format:s.format||null,searchRender:s.searchRender||null,searchDisabledChecked:s.searchDisabledChecked||!1,expandClass:s.expandClass||"vs-expand-icon",onDragstart:s.onDragstart||ee,onDragenter:s.onDragenter||ee,onDrop:s.onDrop||ee,customNodeClick:s.customNodeClick||void 0,update:function(){a._render()},nodesChange:function(e){a.nodes=e,a.vlist&&a._render()}}),a.store.hideRoot&&a.store.root.createNode(),a._init(),a.store.setDefaultChecked()};s.async?setTimeout((function(){y()}),0):y()}return s(e,[{key:"_init",value:function(){this.vlist=new Q({root:this.$el,data:[],maxHeight:this.maxHeight,minHeight:this.minHeight,estimateSize:this.itemHeight,keeps:this.showCount}),this._render(),this.ready&&this.ready(this)}},{key:"_render",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.$$breadcrumb){var t=this.$$breadcrumb.current;this.data=this.nodes.filter((function(e){return e.parent&&e.parent.id===t.id})),this._keywordFilter(this.data),this.$$breadcrumb.renderBreadcrumb()}else this._keywordFilter(this.nodes);e&&this.vlist.update(this.data)}},{key:"_keywordFilter",value:function(e){var t=this;this.data=e.filter((function(e){return t._hasKeyword(e)&&e.visbile&&!(t.store.hideRoot&&0===e.level)}))}},{key:"_hasKeyword",value:function(e){var t=this;if(!this.keyword)return!0;var i=this._checkFilter(e);return i?e.parent&&(e.parent.requireExpand=!0):e.childNodes.forEach((function(e){i||(i=t._hasKeyword(e))})),i}},{key:"_checkFilter",value:function(e){if(this.keyword)return"function"==typeof this.searchFilter?this.searchFilter(this.keyword,e,e.data):e.data.name&&e.data.name.includes(this.keyword)}},{key:"filter",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0;if(this.keyword=t,this.store.onlySearchLeaf=i&&!!t,this.store.isSearch=!!t,this.store.onlySearchLeaf){var n=this.nodes.filter((function(t){return!t.childNodes.length&&e._checkFilter(t)&&!(e.store.hideRoot&&0===t.level)}));return this.vlist.update(n),n}this._render(!1);for(var s=0,a=this.data.length;s<a;s++){var r=this.data[s];r.requireExpand&&(r.requireExpand=!1,r.setExpand(!0,!0))}return this._render(),this.data}},{key:"getNodeById",value:function(e){return this.store.getNodeById(e)}},{key:"getCheckedNodes",value:function(){var e;return(e=this.store).getCheckedNodes.apply(e,arguments)}},{key:"setMaxValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.store.max=e}},{key:"scrollToIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.vlist.scrollToIndex(e)}},{key:"clearCheckedNodes",value:function(){this.getCheckedNodes(!0).forEach((function(e){e.setChecked(!1)}))}}]),e}(),ie=e("VsTreeComponent",{props:{data:Array|Object,options:Object,async:Boolean,animation:Boolean,draggable:Boolean,dropable:Boolean,hideRoot:Boolean,showCheckbox:Boolean,checkboxType:Object,showRadio:Boolean,radioType:String,showLine:Boolean,showIcon:Boolean,onlyShowLeafIcon:Boolean,highlightCurrent:Boolean,accordion:Boolean,nocheckParent:Boolean,sort:Boolean,checkOnClickNode:Boolean,checkFilterLeaf:Boolean,strictLeaf:Boolean,rootName:String,max:Number,lazy:Boolean,load:Function,format:Function,disabledKeys:Array,checkedKeys:Array,expandKeys:Array,keyword:String,expandClass:String,theme:String,breadcrumb:Object,virtual:Object,expandLevel:{type:Number,default:1},indent:{type:Number,default:10},showCount:{type:Number,default:20},itemHeight:{type:Number,default:26},maxHeight:String,minHeight:String,beforeCheck:Function,renderContent:Function,checkFilter:Function,searchFilter:Function,searchRender:Function,onDragstart:Function,onDragenter:Function,onDrop:Function,customNodeClick:Function},data:function(){return{tree:{},id:null}},watch:{max:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.setMaxValue(e)},keyword:function(e){this.filter(e)}},created:function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}this.id="tree".concat(e()+e()).concat(e()).concat(e()).concat(e()).concat(e()).concat(e()).concat(e())},mounted:function(){var e=this;this.$nextTick((function(){e._vsinit()}))},methods:{_vsinit:function(){var e=this;this.tree.tree=new te("#"+this.id,Object.assign({},this.$props,o(o({},this.options),{},{data:this.data,click:function(t,i){e.$emit("click",t,i)},check:function(t,i){e.$emit("check",t,i)},change:function(t){e.$emit("change",t)},contextmenu:function(t,i){e.$emit("node-contextmenu",t,i)},limitAlert:function(){e.$emit("limit-alert")}}))),console.timeEnd("render:tree")},getNodeById:function(e){return this.tree.tree.getNodeById(e)},getCheckedNodes:function(){return this.tree.tree.getCheckedNodes()},filter:function(e){return this.tree.tree.filter(e)},setMaxValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.tree.tree.setMaxValue(e)}},render:function(){return function(e,t,i){const n=arguments.length;return 2===n?f(t)&&!l(t)?T(t)?M(e,null,[t]):M(e,t):M(e,null,t):(n>3?i=Array.prototype.slice.call(arguments,2):3===n&&T(i)&&(i=[i]),M(e,t,i))}("div",{id:this.id},this.$slots.default)}});e("default",{install:function(e){e.component("vs-tree",ie)}}),e("version","0.1.1")}}}));
